<p>movies works! {{movies.length}} películas cargadas</p>
<h1>Lista de peliculas</h1>

<!-- Mostrar mensaje si no hay películas -->
<p *ngIf="!movies.length">No hay peliculas</p>

<!-- Iterar las películas -->
<app-movie-item
  *ngFor="let item of movies"
  [movie]="item"
  (onSelected)="handleMovieSelected($event)">
</app-movie-item>

<!--
src/
    app/
        layout/
        pages/
            movies/
                movie-details/
                    movie-details.ts
                    movie-details.html
                movie-item/
                    movie-item.ts
                    movie-item.html
                movies.ts
                movies.html

        shared/
            services/
                movie.ts
            types/
                movie.ts


PAGES/MOVIES/MOVIES.TS
import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { MovieItem } from './movie-item/movie-item';
import { Movie as IMovie } from '../../shared/types/movie';   // interfaz
import { Movie } from '../../shared/services/movie';          // servicio

@Component({
  selector: 'app-movies',
  imports: [CommonModule, MovieItem],
  templateUrl: './movies.html',
  styleUrl: './movies.scss'
})

export class Movies implements OnInit {
  movies: IMovie[] = [];
  
  constructor(private movieService: Movie) {}

  ngOnInit(): void {
    this.movieService.getAllMovies().then((movies: IMovie[]) => {
      this.movies = movies;
    });
  }
  
  handleMovieSelected(movie: IMovie) {
    this.movieService.setMovie(movie);
  }
}


PAGES/MOVIES/MOVIES.HTML
<p>movies works!</p>
<h1>Lista de peliculas</h1>

@if (!movies.length) {
    <p>No hay peliculas</p>
}

<br>
@for (item of movies; track item) {
    <app-movie-item [movie]="item" (onSelected)="handleMovieSelected($event)"></app-movie-item>
}

PAGES/MOVIES/MOVIE-DETAILS.HTML
<p>movie-details works!</p>
<h2>{{movie.title}}</h2>

PAGES/MOVIES/MOVIE-DETAILS.TS
import { Component } from '@angular/core';
import { Movie } from '../../../shared/services/movie';
import { Movie as IMovie } from '../../../shared/types/movie';
@Component({
  selector: 'app-movie-details',
  imports: [],
  templateUrl: './movie-details.html',
  styleUrl: './movie-details.scss'
})
export class MovieDetails {
  movie: IMovie = { title: ''};

  constructor(private movieService: Movie) {
    this.movie = this.movieService.getMovie();
  }
}

PAGES/MOVIES/MOVIE-ITEM.TS
import { Component, EventEmitter, Input, Output } from '@angular/core';
import { RouterModule } from '@angular/router';
import { Movie } from '../../../shared/types/movie';

@Component({
  selector: 'app-movie-item',
  imports: [RouterModule],
  templateUrl: './movie-item.html',
  styleUrl: './movie-item.scss'
})

export class MovieItem {
  // @Input() title = ''; 
  @Input() movie: Movie = { title: ''};
  
  /* 
  @Output() onSelected: EventEmitter<string> = new EventEmitter();
  selectMovie() {
    console.log('Evento select movie ejecutado a elemento title: ', this.title);
    this.onSelected.emit(this.title);
  }
    */
  @Output() onSelected: EventEmitter<Movie> = new EventEmitter();
  selectMovie() {
    console.log('Evento select movie ejecutado a elemento title: ', this.movie);
    this.onSelected.emit(this.movie);
  }
}



PAGES/MOVIES/MOVIE-ITEM.HTML
<div>
    <a routerLink="/movie-details" (click)="selectMovie()">Titulo: {{movie.title}}</a>
</div>

SHARED/SERVICES/MOVIE.TS
import { Injectable } from '@angular/core';
import { Movie as IMovie } from '../types/movie';

@Injectable({
  providedIn: 'root'
})
export class Movie {

  // private title: string = '';
  private movie: IMovie = { title: ''}
  private movies: IMovie[] = [
    { title: 'Chuerco'},
    { title: 'Terminator'},
    { title: 'Son como ninos'}
  ];
  
  getMovie(): IMovie {
    return this.movie.title ? this.movie: JSON.parse(localStorage.getItem('movie') || '{}');
  }

  setMovie(movie: IMovie): void {
    this.movie = movie;
    localStorage.setItem('movie', JSON.stringify(movie));
  }

  getAllMovies(): Promise<IMovie[]> {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve(this.movies);
      }, 2000);
    });
  }
}

SHARED/TYPES/MOVIE.TS
export interface Movie {
    title: string
}

-->